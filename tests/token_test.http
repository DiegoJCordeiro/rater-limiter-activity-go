### Rate Limiter - Testes com TOKEN
### Use este arquivo com REST Client (VS Code) ou IntelliJ HTTP Client
### Limite padrão de TOKEN: 100 requisições/segundo

@baseUrl = http://localhost:8080
@token1 = test_token_123
@token2 = premium_token
@token3 = basic_token

###############################################
# TESTE 1: Requisição única com token
###############################################

### Request 1 - Token básico
GET {{baseUrl}}/
API_KEY: {{token1}}

###############################################
# TESTE 2: Múltiplas requisições com mesmo token
###############################################

### Request 2
GET {{baseUrl}}/
API_KEY: {{token1}}

### Request 3
GET {{baseUrl}}/
API_KEY: {{token1}}

### Request 4
GET {{baseUrl}}/
API_KEY: {{token1}}

### Request 5
GET {{baseUrl}}/
API_KEY: {{token1}}

### Request 6
GET {{baseUrl}}/
API_KEY: {{token1}}

### Request 7
GET {{baseUrl}}/
API_KEY: {{token1}}

### Request 8
GET {{baseUrl}}/
API_KEY: {{token1}}

### Request 9
GET {{baseUrl}}/
API_KEY: {{token1}}

### Request 10
GET {{baseUrl}}/
API_KEY: {{token1}}

###############################################
# TESTE 3: Exceder limite (deve retornar 429)
###############################################

### Request 11 - Executar rapidamente após as 10 anteriores
GET {{baseUrl}}/
API_KEY: {{token1}}

### Request 12 - Também deve ser bloqueada
GET {{baseUrl}}/
API_KEY: {{token1}}

###############################################
# TESTE 4: Token diferente (contador independente)
###############################################

### Request com token2 - Deve funcionar mesmo que token1 esteja bloqueado
GET {{baseUrl}}/
API_KEY: {{token2}}

### Request com token3
GET {{baseUrl}}/
API_KEY: {{token3}}

###############################################
# TESTE 5: Verificar mensagem de erro
###############################################

### Exceder limite e verificar resposta 429
### Executar este várias vezes rapidamente
GET {{baseUrl}}/
API_KEY: error_test_token

###############################################
# TESTE 6: Token premium (limite maior)
###############################################

### Requisições 1-20 com token premium
### (Deve permitir mais que o limite de IP)
GET {{baseUrl}}/
API_KEY: premium_token

### Request 2
GET {{baseUrl}}/
API_KEY: premium_token

### Request 3
GET {{baseUrl}}/
API_KEY: premium_token

### Request 4
GET {{baseUrl}}/
API_KEY: premium_token

### Request 5
GET {{baseUrl}}/
API_KEY: premium_token

### Request 6
GET {{baseUrl}}/
API_KEY: premium_token

### Request 7
GET {{baseUrl}}/
API_KEY: premium_token

### Request 8
GET {{baseUrl}}/
API_KEY: premium_token

### Request 9
GET {{baseUrl}}/
API_KEY: premium_token

### Request 10
GET {{baseUrl}}/
API_KEY: premium_token

### Request 11 - Ainda deve passar (limite de token é 100)
GET {{baseUrl}}/
API_KEY: premium_token

### Request 12
GET {{baseUrl}}/
API_KEY: premium_token

### Request 13
GET {{baseUrl}}/
API_KEY: premium_token

### Request 14
GET {{baseUrl}}/
API_KEY: premium_token

### Request 15
GET {{baseUrl}}/
API_KEY: premium_token

###############################################
# TESTE 7: Aguardar expiração do bloqueio
###############################################

### Após aguardar o tempo de bloqueio (5 minutos padrão),
### esta requisição deve funcionar novamente
GET {{baseUrl}}/
API_KEY: {{token1}}

###############################################
# TESTE 8: POST com token (testar outros métodos)
###############################################

### POST Request
POST {{baseUrl}}/
API_KEY: {{token1}}
Content-Type: application/json

{
  "test": "data"
}

###############################################
# TESTE 9: Diferentes endpoints com mesmo token
###############################################

### Endpoint raiz
GET {{baseUrl}}/
API_KEY: {{token1}}

### Outro endpoint (se existir)
GET {{baseUrl}}/api/data
API_KEY: {{token1}}

###############################################
# TESTE 10: Token inválido ou vazio
###############################################

### Sem valor no token (deve usar limite de IP)
GET {{baseUrl}}/
API_KEY:

### Header vazio (deve usar limite de IP)
GET {{baseUrl}}/
API_KEY: